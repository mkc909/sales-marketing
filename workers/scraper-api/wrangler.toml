name = "scraper-api"
main = "index.js"
compatibility_date = "2023-12-01"
account_id = "af57e902fd9dcaad7484a7195ac0f536"

# KV namespace for caching
[[kv_namespaces]]
binding = "SCRAPER_KV"
id = "ed00623302724b41bf2ae8c0899a3bbe"
preview_id = "ed00623302724b41bf2ae8c0899a3bbe"

# Service binding for browser worker
[[services]]
binding = "BROWSER_WORKER"
service = "scraper-browser"
environment = "production"

# Environment variables
[vars]
CACHE_TTL = "86400"
RATE_LIMIT_WINDOW = "60"
RATE_LIMIT_MAX_REQUESTS = "10"

# Production environment
[env.production]
vars = { ENVIRONMENT = "production" }

# Development environment
[env.development]
vars = { ENVIRONMENT = "development" }

# Route configuration for custom domain
routes = [
    { pattern = "api.progeodata.com/*", zone_name = "progeodata.com" }
]

# Limits
[limits]
cpu_ms = 50000